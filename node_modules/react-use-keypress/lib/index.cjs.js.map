{"version":3,"file":"index.cjs.js","sources":["../src/shimKeyboardEvent.js","../src/index.js"],"sourcesContent":["// Fixing inconsistencies from older browsers\n// https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\nconst aliases = new Map([\n  ['Win', 'Meta'],\n  ['Scroll', 'ScrollLock'],\n  ['Spacebar', ' '],\n  ['Down', 'ArrowDown'],\n  ['Left', 'ArrowLeft'],\n  ['Right', 'ArrowRight'],\n  ['Up', 'ArrowUp'],\n  ['Del', 'Delete'],\n  ['Crsel', 'CrSel'],\n  ['Exsel', 'ExSel'],\n  ['Apps', 'ContextMenu'],\n  ['Esc', 'Escape'],\n  ['Decimal', '.'],\n  ['Multiply', '*'],\n  ['Add', '+'],\n  ['Subtract', '-'],\n  ['Divide', '/'],\n]);\n\nconst shimKeyboardEvent = (event) => {\n  if (aliases.has(event.key)) {\n    const key = aliases.get(event.key);\n\n    Object.defineProperty(event, 'key', {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return key;\n      },\n    });\n  }\n};\n\nexport default shimKeyboardEvent;\n","import { useEffect, useRef } from 'react';\nimport invariant from 'tiny-invariant';\nimport shimKeyboardEvent from './shimKeyboardEvent';\n\nconst useKeypress = (keys, handler) => {\n  invariant(\n    Array.isArray(keys) || typeof keys === 'string',\n    'Expected `keys` to be an array or string'\n  );\n  if (Array.isArray(keys)) {\n    keys.forEach((key, i) => {\n      invariant(\n        typeof key === 'string',\n        `Expected \\`keys[${i}]\\` to be a string`\n      );\n    });\n  }\n  invariant(\n    typeof handler === 'function' || handler == null,\n    'Expected `handler` to be a function'\n  );\n\n  const eventListenerRef = useRef();\n\n  useEffect(() => {\n    eventListenerRef.current = (event) => {\n      shimKeyboardEvent(event);\n      if (Array.isArray(keys) ? keys.includes(event.key) : keys === event.key) {\n        handler?.(event);\n      }\n    };\n  }, [keys, handler]);\n\n  useEffect(() => {\n    const eventListener = (event) => {\n      eventListenerRef.current(event);\n    };\n    window.addEventListener('keydown', eventListener);\n    return () => {\n      window.removeEventListener('keydown', eventListener);\n    };\n  }, []);\n};\n\nexport default useKeypress;\n"],"names":["aliases","Map","shimKeyboardEvent","event","has","key","get","Object","defineProperty","configurable","enumerable","useKeypress","keys","handler","Array","isArray","invariant","forEach","i","eventListenerRef","useRef","useEffect","current","includes","eventListener","window","addEventListener","removeEventListener"],"mappings":"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"}